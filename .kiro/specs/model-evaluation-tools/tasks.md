# 实现计划: 模型评估工具 (Model Evaluation Tools)

## 概述

实现模型评估工具，提供混淆矩阵、准确率、召回率等评估指标，帮助分析模型性能。

## 任务列表

- [x] 1. 实现基础评估指标计算
  - [x] 1.1 创建 `工具/模型评估.py` 文件，实现 `模型评估器` 类
    - 实现混淆矩阵生成
    - 实现准确率计算
    - _需求: 1.1, 2.1_
  - [x] 1.2 实现类别指标计算
    - 精确率、召回率、F1 分数
    - 宏平均和加权平均
    - _需求: 1.2, 1.3, 1.4, 1.5_
  - [x] 1.3 编写属性测试：指标计算正确性

    - **属性 1: 指标计算正确性**
    - *对于任意* 混淆矩阵，计算的指标应满足数学定义
    - **验证: 需求 1.1, 1.2, 1.3, 1.4**

- [x] 2. 实现混淆矩阵可视化
  - [x] 2.1 创建 `可视化器` 类
    - 绘制混淆矩阵热力图
    - 显示动作名称而非索引
    - _需求: 2.2, 2.3_
  - [x] 2.2 实现混淆对识别
    - 高亮最容易混淆的动作对
    - 保存为图像文件
    - _需求: 2.4, 2.5_
  - [x] 2.3 编写属性测试：混淆矩阵行和正确性

    - **属性 2: 混淆矩阵对称性**
    - *对于任意* 预测结果，混淆矩阵行和应等于各类别实际样本数
    - **验证: 需求 2.1**

- [x] 3. 实现评估报告生成
  - [x] 3.1 创建 `报告生成器` 类
    - 生成文本格式报告
    - 包含所有指标和分析摘要
    - _需求: 3.1, 3.2_
  - [x] 3.2 实现多格式导出
    - Markdown 格式导出
    - HTML 格式导出
    - _需求: 3.3_
  - [x] 3.3 实现改进建议生成
    - 分析弱势类别
    - 生成改进建议
    - _需求: 3.4_
  - [x] 3.4 编写属性测试：报告完整性

    - **属性 3: 报告完整性**
    - *对于任意* 评估结果，报告应包含所有指标和混淆矩阵
    - **验证: 需求 3.2**

- [x] 4. 实现批量评估功能
  - [x] 4.1 实现测试数据加载
    - 从数据目录加载测试数据
    - 支持多种数据格式
    - _需求: 4.1_
  - [x] 4.2 实现批量评估流程
    - 处理所有测试样本
    - 显示进度条
    - 报告评估时间和吞吐量
    - _需求: 4.2, 4.3, 4.4_

- [x] 5. 实现动作类别分析
  - [x] 5.1 实现动作分组功能
    - 按类型分组（移动、技能、特殊等）
    - 计算每组指标
    - _需求: 5.1, 5.2_
  - [x] 5.2 实现弱势类别识别
    - 识别表现不佳的动作
    - 建议需要更多训练样本的动作
    - _需求: 5.3, 5.4_

- [x] 6. 创建评估脚本
  - [x] 6.1 创建 `工具/评估模型.py` 脚本
    - 命令行接口
    - 支持指定模型和测试数据
    - 自动生成报告
    - _需求: 3.1, 4.1_

- [x] 7. 检查点 - 确保所有测试通过
  - 运行所有单元测试和属性测试
  - 如有问题请询问用户

## 备注

- 带 `*` 标记的任务为可选测试任务
- 使用 matplotlib 和 seaborn 进行可视化
- 使用 sklearn.metrics 辅助计算指标
