# 设计文档

## 概述

本设计文档描述了UI细节优化的技术实现方案，包括按钮文字居中、进度条显示优化、窗口预览协调性改进和删除按钮完整显示等修复。

## 架构

本次修改主要涉及以下文件：
- `界面/页面/首页.py` - 快捷按钮文字居中
- `界面/页面/训练页.py` - 进度条高度优化
- `界面/页面/数据收集页.py` - 进度条和预览区域优化
- `界面/页面/配置页.py` - 删除按钮完整显示
- `界面/样式/布局常量.py` - 进度条高度常量调整

## 组件和接口

### 1. 快捷按钮文字居中

**问题分析：**
当前 `快捷按钮` 类使用 `setText()` 设置多行文本，但 QPushButton 默认不保证多行文本居中。

**解决方案：**
- 移除多行文本，只显示标题
- 确保样式中不使用 `text-align: center`（Qt样式表中此属性对按钮无效）
- QPushButton 默认会居中显示单行文本

**代码修改：**
```python
# 界面/页面/首页.py - 快捷按钮类
def _初始化样式(self) -> None:
    self.setFixedSize(130, 85)
    self.setCursor(Qt.PointingHandCursor)
    
    # 只显示标题，不使用多行文本
    self.setText(self._标题)
    self.setToolTip(self._描述)
    
    self.setStyleSheet(f"""
        QPushButton {{
            background-color: {颜色.卡片背景};
            border: {布局常量.卡片边框宽度}px solid {颜色.边框};
            border-radius: {布局常量.卡片圆角}px;
            font-size: {布局常量.正文字号}px;
            font-weight: 500;
            color: {颜色.标题};
            padding: 8px;
        }}
        ...
    """)
```

### 2. 进度条完整显示

**问题分析：**
当前进度条高度设置为 `进度条高度最大 = 8px`，太小导致文字显示不全。

**解决方案：**
- 将进度条高度从 8px 增加到 16px
- 更新布局常量中的进度条高度值
- 确保进度条文字可见

**代码修改：**
```python
# 界面/样式/布局常量.py
进度条高度最小 = 12
进度条高度最大 = 16  # 从8改为16
进度条圆角 = 4
```

```python
# 界面/页面/训练页.py - 进度条样式
self._进度条 = QProgressBar()
self._进度条.setFixedHeight(布局常量.进度条高度最大)  # 16px
self._进度条.setTextVisible(True)
self._进度条.setFormat("%p%")
```

### 3. 窗口预览区域协调性

**问题分析：**
预览区域的背景色 `#1E293B` 与整体浅色主题不协调。

**解决方案：**
- 使用与主题一致的背景色
- 保持8px圆角与卡片一致
- 添加边框使其与其他组件协调

**代码修改：**
```python
# 界面/页面/数据收集页.py - 画面预览类
self._预览标签.setStyleSheet(f"""
    background-color: {颜色.悬停背景};
    border: 1px solid {颜色.边框};
    border-radius: {self._布局常量.卡片圆角}px;
    color: {颜色.次要文字};
    font-size: {self._布局常量.正文字号}px;
""")
```

### 4. 删除按钮完整显示

**问题分析：**
当前删除按钮只显示 "X"，宽度只有32px，没有文字说明。

**解决方案：**
- 将按钮文字改为 "🗑️ 删除" 或 "删除"
- 增加按钮宽度以容纳完整内容
- 使用危险色样式

**代码修改：**
```python
# 界面/页面/配置页.py - 删除档案按钮
self._删除档案按钮 = QPushButton("删除")
self._删除档案按钮.setFixedSize(60, 布局常量.按钮高度)
self._删除档案按钮.setStyleSheet(f"""
    QPushButton {{
        background-color: {颜色.卡片背景};
        color: {颜色.错误};
        border: 1px solid {颜色.边框};
        border-radius: {布局常量.按钮圆角}px;
        font-size: {布局常量.按钮文字字号}px;
    }}
    QPushButton:hover {{
        background-color: #FEE2E2;
        border-color: {颜色.错误};
    }}
""")
```

## 数据模型

本次修改不涉及数据模型变更，仅修改UI样式和布局。

## 正确性属性

*正确性属性是在系统所有有效执行中都应保持为真的特征或行为——本质上是关于系统应该做什么的正式声明。属性作为人类可读规范和机器可验证正确性保证之间的桥梁。*

由于本次修改主要是UI视觉优化，大部分验收标准需要视觉验证，以下是可自动测试的属性：

**属性 1: 进度条高度符合最小要求**
*对于任意* 进度条组件，其高度应当大于等于16px
**验证: 需求 2.4**

**属性 2: 预览区域保持16:9宽高比**
*对于任意* 预览区域尺寸计算，宽度除以高度应当接近1.778（16/9）
**验证: 需求 3.4**

## 错误处理

本次修改不涉及错误处理逻辑变更。

## 测试策略

### 单元测试
- 验证进度条高度常量值 >= 16
- 验证预览区域宽高比计算函数返回正确比例

### 手动测试
- 视觉检查按钮文字是否居中
- 视觉检查进度条是否完整显示
- 视觉检查预览区域是否与主题协调
- 视觉检查删除按钮是否显示完整
