# 任务列表

## 概述

实现配置界面中的窗口选择功能，让用户可以从运行中的进程列表中选择目标窗口。

## 任务

- [x] 1. 创建窗口选择对话框组件
  - [x] 1.1 创建 `界面/组件/窗口选择器.py` 文件
    - 创建 `窗口选择对话框` 类，继承 `QDialog`
    - 定义 `窗口已选择` 信号
    - 实现基本对话框布局（搜索区域、列表区域、按钮区域）
    - _需求: 2.1, 2.2_

  - [x] 1.2 实现窗口列表显示功能
    - 集成 `核心/窗口检测.py` 中的 `窗口查找器`
    - 使用 `QListWidget` 显示窗口列表
    - 每个列表项显示：缩略图、标题、进程名、尺寸
    - _需求: 2.1, 2.2, 2.3_

  - [x] 1.3 实现搜索过滤功能
    - 添加搜索输入框
    - 实现实时过滤（匹配标题和进程名）
    - _需求: 3.1, 3.2, 3.3, 3.4_

  - [x] 1.4 实现窗口选择交互
    - 支持单击选中、双击确认
    - 实现确定/取消按钮逻辑
    - _需求: 2.4, 2.5_

- [x] 2. 实现点击选择模式
  - [x] 2.1 添加点击选择按钮和倒计时逻辑
    - 显示"🎯 点击选择"按钮
    - 实现3秒倒计时提示
    - _需求: 4.1, 4.2_

  - [x] 2.2 实现窗口捕获逻辑
    - 倒计时结束后最小化对话框
    - 捕获用户点击的窗口
    - 恢复对话框并高亮显示选中窗口
    - _需求: 4.3, 4.4, 4.5_

- [x] 3. 实现刷新功能
  - [x] 3.1 添加刷新按钮
    - 显示"🔄 刷新"按钮
    - 重新获取窗口列表
    - 保持搜索过滤条件
    - _需求: 6.1, 6.2, 6.3_

- [x] 4. 集成到配置界面
  - [x] 4.1 在配置界面添加选择窗口按钮
    - 修改 `界面/配置界面.py` 的 `_创建窗口设置标签页` 方法
    - 添加"🎯 选择窗口"按钮
    - _需求: 1.1, 1.2, 1.3_

  - [x] 4.2 实现参数自动填充
    - 添加 `_打开窗口选择对话框` 方法
    - 添加 `_处理窗口选择` 方法
    - 添加 `_填充窗口参数` 方法
    - 选择窗口后自动填充X、Y、宽度、高度
    - 更新窗口预览
    - 标记配置为已修改
    - _需求: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6_

- [x] 5. 检查点 - 确保所有功能正常
  - 确保所有功能正常工作，如有问题请询问用户

## 实现状态

✅ **所有任务已完成**

### 已实现的功能

1. **窗口选择对话框** (`界面/组件/窗口选择器.py`)
   - `窗口选择对话框` 类：完整的 GUI 对话框
   - `窗口列表项` 类：显示窗口缩略图和信息
   - `GUI窗口选择器` 类：提供与命令行版本相同的接口

2. **窗口列表功能**
   - 显示所有可见窗口
   - 每个窗口显示：缩略图、标题、进程名、尺寸、状态
   - 支持单击选中、双击确认

3. **搜索过滤功能**
   - 实时过滤窗口列表
   - 匹配窗口标题和进程名（不区分大小写）

4. **点击选择模式**
   - 3秒倒计时提示
   - 最小化对话框后捕获用户点击的窗口
   - 确认对话框显示捕获的窗口信息

5. **刷新功能**
   - 刷新按钮重新获取窗口列表
   - 保持当前搜索过滤条件

6. **配置界面集成** (`界面/配置界面.py`)
   - "🎯 选择窗口"按钮
   - `_打开窗口选择对话框` 方法
   - `_处理窗口选择` 方法
   - `_填充窗口参数` 方法
   - 自动填充窗口坐标和尺寸
   - 更新窗口预览
   - 标记配置为已修改状态

## 备注

- 复用现有的 `核心/窗口检测.py` 模块中的 `窗口查找器` 和 `窗口信息` 类
- 缩略图获取失败时显示默认占位图 "🖼️"
- 点击选择模式在捕获窗口后显示确认对话框
- 窗口选择对话框组件已在 `界面/组件/窗口选择器.py` 中完整实现
