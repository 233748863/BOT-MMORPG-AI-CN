# 实现计划: UI布局适配调整

## 概述

对MMORPG游戏AI助手GUI界面进行全面的布局适配调整，包括统一布局常量、优化各页面布局、添加动画效果和性能优化。

## 任务列表

- [x] 1. 创建统一的布局常量和样式管理模块
  - [x] 1.1 创建布局常量类，定义所有尺寸、间距、字号等常量
    - 在 `界面/样式/` 目录下创建 `布局常量.py`
    - 定义窗口尺寸、导航栏、内容区域、卡片、按钮、表单等常量
    - _Requirements: 1.1, 1.2, 1.3, 1.4_
  - [x] 1.2 更新主题样式，应用新的尺寸约束
    - 更新 `界面/样式/主题.py` 中的QSS样式
    - 确保文字、按钮、组件尺寸符合约束规范
    - _Requirements: 9.1, 9.2, 9.3, 10.1, 10.2, 10.3, 10.4, 10.5_
  - [x] 1.3 编写布局常量单元测试

    - 验证常量值在合理范围内
    - _Requirements: 1.2, 1.3, 1.4_

- [x] 2. 创建通用卡片组件和动画管理器
  - [x] 2.1 创建通用卡片组件类
    - 在 `界面/组件/` 目录下创建 `通用组件.py`
    - 实现带标题、图标的卡片组件
    - 应用统一的圆角、边框、内边距样式
    - _Requirements: 9.1, 9.2, 9.3, 9.4, 9.5, 9.6_
  - [x] 2.2 创建动画管理器类
    - 实现淡入淡出动画
    - 实现页面切换动画
    - 确保动画时长在100-300ms范围内
    - _Requirements: 动画设计规范_
  - [x] 2.3 编写卡片样式一致性属性测试

    - **Property 5: 卡片样式一致性**
    - **Validates: Requirements 9.1, 9.2, 9.3, 9.4, 9.5, 9.6**

- [x] 3. 优化导航栏组件
  - [x] 3.1 更新导航栏宽度和样式
    - 将导航栏宽度调整为100px
    - 更新导航项高度、间距、内边距
    - 添加选中项左侧指示条样式
    - _Requirements: 8.1, 8.2, 8.4, 8.5_
  - [x] 3.2 编写导航栏样式一致性属性测试

    - **Property 4: 导航栏样式一致性**
    - **Validates: Requirements 8.1, 8.2, 8.4, 8.5**

- [x] 4. 优化数据收集页布局
  - [x] 4.1 重构数据收集页为左右两栏布局(60:40)
    - 左栏：控制面板 + 状态监控
    - 右栏：智能录制面板 + 游戏画面预览
    - 底部：操作说明卡片
    - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6_
  - [x] 4.2 优化预览区域保持16:9宽高比
    - 设置预览区域固定宽高比
    - 添加无内容时的占位提示
    - _Requirements: 2.5, 2.7_
  - [x] 4.3 编写预览区域宽高比属性测试

    - **Property 3: 预览区域宽高比**
    - **Validates: Requirements 2.5**

- [x] 5. 优化训练页布局
  - [x] 5.1 重构训练页为上下两区布局(60:40)
    - 上区左栏：训练设置卡片
    - 上区右栏：训练进度卡片
    - 下区：训练日志卡片
    - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_

- [x] 6. 优化运行页布局
  - [x] 6.1 重构运行页为左右两栏布局(50:50)
    - 左栏：运行模式卡片 + 增强模块状态卡片
    - 右栏：运行状态卡片 + 运行日志卡片
    - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5_

- [x] 7. 优化配置页布局
  - [x] 7.1 重构配置页为标签页形式
    - 创建4个标签页：游戏窗口、模型设置、训练参数、增强模块
    - 每个标签页使用表单布局
    - 底部固定保存和重置按钮
    - _Requirements: 5.1, 5.2, 5.3, 5.5_

- [x] 8. 优化首页布局
  - [x] 8.1 重构首页为仪表盘风格
    - 顶部：系统状态卡片（横跨整个宽度）
    - 中部：快捷操作按钮（水平排列）
    - 底部：提示卡片 + 快捷键卡片
    - _Requirements: 6.1, 6.2, 6.3, 6.5_
  - [x] 8.2 优化快捷按钮组件
    - 确保每个按钮包含图标、标题和描述
    - 调整按钮尺寸为120-140px宽，80-90px高
    - _Requirements: 6.4_
  - [x] 8.3 编写快捷按钮内容完整性属性测试

    - **Property 7: 快捷按钮内容完整性**
    - **Validates: Requirements 6.4**

- [x] 9. 优化数据管理页布局
  - [x] 9.1 重构数据管理页为左右两栏布局(65:35)
    - 左栏：操作按钮 + 数据文件列表
    - 右栏上部：文件详细信息
    - 右栏下部：数据分布统计
    - _Requirements: 7.1, 7.2, 7.3, 7.4, 7.5_

- [x] 10. 实现性能优化
  - [x] 10.1 实现页面延迟加载
    - 创建延迟加载页面管理器
    - 页面按需创建，已创建的从缓存获取
    - _Requirements: 性能优化_
  - [x] 10.2 实现异步初始化
    - 主窗口先显示基础框架
    - 使用QTimer.singleShot延迟初始化其他组件
    - _Requirements: 性能优化_
  - [x] 10.3 实现状态更新节流
    - 创建状态更新节流器类
    - 设置最小更新间隔为50ms
    - _Requirements: 性能优化_

- [x] 11. 集成和测试
  - [x] 11.1 更新主程序集成所有优化
    - 在 `界面/主程序.py` 中应用新的布局常量
    - 集成动画管理器和延迟加载
    - 应用页面切换动画
    - _Requirements: 所有_
  - [x] 11.2 编写布局间距一致性属性测试

    - **Property 1: 布局间距一致性**
    - **Validates: Requirements 1.2, 1.3, 1.4**
  - [x] 11.3 编写按钮样式一致性属性测试

    - **Property 6: 按钮样式一致性**
    - **Validates: Requirements 10.1, 10.2, 10.3, 10.4, 10.5**

- [x] 12. 检查点 - 确保所有测试通过
  - 运行所有单元测试和属性测试
  - 验证UI显示正常，无遮挡或显示不全
  - 验证动画流畅，页面切换响应及时
  - 如有问题请询问用户

## 注意事项

- 标记 `*` 的任务为可选测试任务，可跳过以加快MVP开发
- 每个任务都引用了具体的需求条款以确保可追溯性
- 检查点任务用于验证阶段性成果
- 属性测试验证通用的正确性属性
