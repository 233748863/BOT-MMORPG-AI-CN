# 实现计划: 自动窗口检测 (Auto Window Detection)

## 概述

实现自动游戏窗口检测功能，自动检测游戏窗口的位置和大小。

## 任务列表

- [x] 1. 实现窗口查找器
  - [x] 1.1 创建 `核心/窗口检测.py` 文件，实现 `窗口查找器` 类
    - 按进程名查找窗口
    - 按窗口标题查找（支持模糊匹配）
    - _需求: 1.1, 1.2_
  - [x] 1.2 实现窗口信息获取
    - 获取窗口位置和大小
    - 获取窗口缩略图
    - _需求: 1.3, 2.2_
  - [x] 1.3 实现多窗口处理
    - 返回所有匹配窗口
    - 用户选择功能
    - _需求: 1.4, 1.5_
  - [x] 1.4 编写属性测试：窗口唯一性

    - **属性 1: 窗口唯一性**
    - *对于任意* 返回的窗口句柄，应对应一个有效的窗口
    - **验证: 需求 1.3**

- [x] 2. 实现窗口选择器
  - [x] 2.1 实现 `窗口选择器` 类
    - 显示窗口列表界面
    - 关键词过滤
    - _需求: 2.1, 2.3, 2.4_
  - [x] 2.2 实现点击选择模式
    - 倒计时显示
    - 捕获点击的窗口
    - 确认选择
    - _需求: 5.1, 5.2, 5.3, 5.4_

- [x] 3. 实现窗口跟踪器
  - [x] 3.1 实现 `窗口跟踪器` 类
    - 后台线程跟踪
    - 位置变化检测
    - 大小变化检测
    - _需求: 3.1, 3.3_
  - [x] 3.2 实现自动更新机制
    - 窗口移动时更新截取区域
    - 窗口调整大小时通知用户
    - _需求: 3.2, 3.4_
  - [x] 3.3 编写属性测试：位置准确性

    - **属性 2: 位置准确性**
    - *对于任意* 获取的窗口位置，应与实际窗口位置一致
    - **验证: 需求 3.2**

- [x] 4. 实现配置管理器
  - [x] 4.1 实现 `窗口配置管理器` 类
    - 保存窗口配置
    - 加载窗口配置
    - _需求: 4.1, 4.2_
  - [x] 4.2 实现多配置支持
    - 为不同游戏保存配置
    - 设置默认配置
    - _需求: 4.3, 4.4_
  - [x] 4.3 编写属性测试：配置持久性


    - **属性 3: 配置持久性**
    - *对于任意* 保存的窗口配置，重新加载后应与保存时一致
    - **验证: 需求 4.1**

- [x] 5. 集成到屏幕截取
  - [x] 5.1 修改 `核心/屏幕截取.py`，集成窗口检测
    - 自动获取窗口区域
    - 窗口跟踪集成
    - _需求: 3.2_
  - [x] 5.2 添加窗口配置到配置文件
    - 窗口标识配置
    - 自动检测开关
    - _需求: 4.1_

- [x] 6. 检查点 - 确保所有测试通过
  - 运行所有单元测试和属性测试
  - 如有问题请询问用户

## 备注

- 带 `*` 标记的任务为可选测试任务
- 使用 pywin32 库访问 Windows API
- 仅支持 Windows 系统
